{% extends 'base.html'%}
{% load static %}
{% load i18n %}
{% block title %}| card {% endblock%}


{% block style %}
<style>

.status{
      border-radius: 80px;
      font-weight: 900;
      padding: 5px 10px;
     
      background-color: orange;
      color: #fff;
      text-align: center;
     
    }

.ringf
{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:150px;
  height:150px;
  background:#3c3c3c;
  border:3px solid #fd07f5;
  border-radius:50%;
  text-align:center;
  line-height:150px;
  font-family:sans-serif;
  font-size:20px;
  color:aqua;
  letter-spacing:4px;
  text-transform:uppercase;
  text-shadow:0 0 10px #fff000;
  box-shadow:0 0 20px rgba(0,0,0,.5);
  display:none;
}
.ring:before
{
  content:'';
  position:absolute;
  top:-3px;
  left:-3px;
  width:100%;
  height:100%;
  border:3px solid transparent;
  border-top:3px solid #fff000;
  border-right:3px solid #fff000;
  border-radius:50%;
  animation:animateC 2s linear infinite;
}
.ringf span
{
  display:block;
  position:absolute;
  top:calc(50% - 2px);
  left:50%;
  width:50%;
  height:4px;
  background:transparent;
  transform-origin:left;
  animation:animate 2s linear infinite;
}
.ringf span:before
{
  content:'';
  position:absolute;
  width:16px;
  height:16px;
  border-radius:50%;
  background:#fff000;
  top:-6px;
  right:-8px;
  box-shadow:0 0 20px #fff000;
}
@keyframes animateC
{
  0%
  {
    transform:rotate(0deg);
  }
  100%
  {
    transform:rotate(360deg);
  }
}
@keyframes animate
{
  0%
  {
    transform:rotate(45deg);
  }
  100%
  {
    transform:rotate(405deg);
  }
}

.my-num{
  color: red;
  font-weight: bold;
  border: 1px solid darkred;
  padding: 2px 10px;
  border-radius: 50px;
  background-color: yellow;
}
@media (max_length = 412px) {
  .gx{
    font-size: 0.1px;
  }
}
</style>
<style>
  .table_section{
    /* height: 65px; */
   
    overflow-X: auto;
  }

  table{
    width: 100%;
    table-layout: fixed;
    min-width: 1000px;
    border-collapse: collapse;
    
    /* background-color: #f6f9fc; */
  }
  table th{
    position: static;
    top: 0;
    /* background-color: #f6f9fc; */
    color:  #2196F3;
    font-size: 15px;
  }
  table th{
    border-bottom: 1px solid #0298cf;
  
  }
  table th,tr{
    /* border-bottom: 1px solid #0298cf; */
    padding: 10px 20px;
    white-space: break-all;
    text-align: center;
  }
  td img{
    height: 60px;
    width: 60px;
    object-fit: cover;
    border-radius: 15px;
    border: 5px solid #ced0d2;

  }
  tr:hover td{
    color: #0298cf; font-weight: 900;
    /* background-color: #f6f9fc; */
    cursor: pointer;
  }
  button{
    outline: none;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    padding: 10px;
    color: #fff;
  }
  td button:nth-child(1){
    background-color: #0298cf; font-weight: 900
  }
  td button:nth-child(2){
    background-color: #f80000;
  }
  .h{
  display: flex;
   gap: 6px;
   word-wrap: break-word;
}
 .ffact{
  display: flex; 
   align-items: center;
    background-color: aquamarine; 
    width: 30%;
     border-radius: 20px;
 }
@media screen and (max-width: 500px )  {
  .h{
  display: block !important;

   width: 100%;
  }
  .fagct{
  display: flex; 
   align-items: center;
    background-color: aquamarine; 
    margin-bottom: 5px;
    width: 100% !important;
     border-radius: 20px;
 }
}
@media screen and (max-width: 1000px )  {
  .h{
  display: block !important;

   width: 100%;
  }
  .fafct{
  display: flex; 
   align-items: center;
    background-color: aquamarine; 
    margin-bottom: 5px;
    width: 100% !important;
     border-radius: 20px;
 }
}

.gred{
        display: grid;
        grid-template-columns: repeat(4,auto);
        gap: 1px;
    }
    @media screen and (max-width:500px) {
      .gred{
        display: grid;
        grid-template-columns: repeat(2,auto);
        gap: 1px;
    }
    }
    .fact{
        /* width: 25%; */
        background-color: #ffffff;
        box-shadow:  0 0 1.2em rgba(0, 4, 52, 0.1);
        margin: 5px 5px 5px 5px;
        padding: 1em 1.8em;
        border-radius: 0.6em;
        border: none;
        border-bottom: 3px solid #566fff;
        /* display: flex; */
    }
    .fact h2{
        font-size: 1.8em;
        box-shadow: #181a34;
    }
    .fact p{
        font-size: 1em;
       
        color: #50526b;
        line-height: 1.8em;
        text-align: justify;
        margin-top: 0.8em;
        font-weight: bold;
        /* display: block; */

    }
    /* i{
      display: block;
    } */
    .loaderloader{
      pointer-events: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: 3px solid transparent;
      border-top-color: #111;
      animation: anl 1s  ease infinite;
      display:none;
      cursor : not-allowed;
     
  }
  @keyframes anl{
      0%{
          transform: rotate(0turn);
      }
      100%{
          transform: rotate(1turn);
      }
  }
</style>
{% endblock  %}
{% block content %}

<div   class="content-wrapper">
  <div class="preloader-wrapper">
    <div class="preloader">
    </div>
  </div>
<div class="my-form  p-1 roudend border ">

  <div class="taps"> 
    <div data-aos="flip-left"
    data-aos-easing="ease-out-cubic"
    data-aos-duration="2000">
    
<div  style="width: 100%; display: flex; justify-content: center; align-items: center;">
  <div class="mt-3   text-align-center" style=" border:  2px solid rgb(39, 212, 224); width: 100%; color: #fff; background-color: rgb(0, 229, 255); border-radius: 6px; ">
    <h5  style="color: #fff; text-align: center;">{% trans "طلب الشراء" %} </h5>
  </div>
</div>
</div>
{% include 'parts/allert.html'%}


{% if not request.user.is_authenticated or request.user.is_anonymous%}
<h5 class="alerd alert-warning">
  {% trans "يجب " %}
  <a href="{%url 'signin' %}" class="" style="color: red;">{% trans "تسجل الدخول" %}</a>
</h5>

 {% elif  order %}
 
 <div  class="gred">


  <div class="pymrnt-1 fact ">
    <div >
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
        <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
      </svg>
    </div>
    <div>
      <h6>  {% trans "اسم  " %}</h6>
      <h6 > {{order.user.first_name|add:'  '|add:order.user.last_name}} </h6>
    
    </div>
      
  </div>

  <div class="pymrnt-2 fact">
   
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-r-circle" viewBox="0 0 16 16">
        <path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.5 4.002h3.11c1.71 0 2.741.973 2.741 2.46 0 1.138-.667 1.94-1.495 2.24L11.5 12H9.98L8.52 8.924H6.836V12H5.5zm1.335 1.09v2.777h1.549c.995 0 1.573-.463 1.573-1.36 0-.913-.596-1.417-1.537-1.417z"/>
      </svg>
    

      <h6> {% trans " رقم الطلب " %}</h6>
      <h6 > {{order.id}}</h6>
    
  </div>



  <div class="pymrnt-3 fact">
   
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-database-fill" viewBox="0 0 16 16">
        <path d="M3.904 1.777C4.978 1.289 6.427 1 8 1s3.022.289 4.096.777C13.125 2.245 14 2.993 14 4s-.875 1.755-1.904 2.223C11.022 6.711 9.573 7 8 7s-3.022-.289-4.096-.777C2.875 5.755 2 5.007 2 4s.875-1.755 1.904-2.223"/>
        <path d="M2 6.161V7c0 1.007.875 1.755 1.904 2.223C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777C13.125 8.755 14 8.007 14 7v-.839c-.457.432-1.004.751-1.49.972C11.278 7.693 9.682 8 8 8s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
        <path d="M2 9.161V10c0 1.007.875 1.755 1.904 2.223C4.978 12.711 6.427 13 8 13s3.022-.289 4.096-.777C13.125 11.755 14 11.007 14 10v-.839c-.457.432-1.004.751-1.49.972-1.232.56-2.828.867-4.51.867s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
        <path d="M2 12.161V13c0 1.007.875 1.755 1.904 2.223C4.978 15.711 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13v-.839c-.457.432-1.004.751-1.49.972-1.232.56-2.828.867-4.51.867s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
      </svg>
  
    
      <h6>{% trans "المجموع" %} </h6>
      <h6 > {{total}}جنيه </h6>
    </div>
  


  
  <div class="pymrnt-4 fact">
   
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-database-fill" viewBox="0 0 16 16">
        <path d="M3.904 1.777C4.978 1.289 6.427 1 8 1s3.022.289 4.096.777C13.125 2.245 14 2.993 14 4s-.875 1.755-1.904 2.223C11.022 6.711 9.573 7 8 7s-3.022-.289-4.096-.777C2.875 5.755 2 5.007 2 4s.875-1.755 1.904-2.223"/>
        <path d="M2 6.161V7c0 1.007.875 1.755 1.904 2.223C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777C13.125 8.755 14 8.007 14 7v-.839c-.457.432-1.004.751-1.49.972C11.278 7.693 9.682 8 8 8s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
        <path d="M2 9.161V10c0 1.007.875 1.755 1.904 2.223C4.978 12.711 6.427 13 8 13s3.022-.289 4.096-.777C13.125 11.755 14 11.007 14 10v-.839c-.457.432-1.004.751-1.49.972-1.232.56-2.828.867-4.51.867s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
        <path d="M2 12.161V13c0 1.007.875 1.755 1.904 2.223C4.978 15.711 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13v-.839c-.457.432-1.004.751-1.49.972-1.232.56-2.828.867-4.51.867s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
      </svg>
   
    
      <h6>  {% trans  "عدد المنتجات " %}</h6>
      <h6 > {{orderdetails.count}} </h6>
    
  </div>


  


</div>

{% if t  == True %}
<div class="pymrnt-5 fact">
 
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-database-fill" viewBox="0 0 16 16">
      <path d="M3.904 1.777C4.978 1.289 6.427 1 8 1s3.022.289 4.096.777C13.125 2.245 14 2.993 14 4s-.875 1.755-1.904 2.223C11.022 6.711 9.573 7 8 7s-3.022-.289-4.096-.777C2.875 5.755 2 5.007 2 4s.875-1.755 1.904-2.223"/>
      <path d="M2 6.161V7c0 1.007.875 1.755 1.904 2.223C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777C13.125 8.755 14 8.007 14 7v-.839c-.457.432-1.004.751-1.49.972C11.278 7.693 9.682 8 8 8s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
      <path d="M2 9.161V10c0 1.007.875 1.755 1.904 2.223C4.978 12.711 6.427 13 8 13s3.022-.289 4.096-.777C13.125 11.755 14 11.007 14 10v-.839c-.457.432-1.004.751-1.49.972-1.232.56-2.828.867-4.51.867s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
      <path d="M2 12.161V13c0 1.007.875 1.755 1.904 2.223C4.978 15.711 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13v-.839c-.457.432-1.004.751-1.49.972-1.232.56-2.828.867-4.51.867s-3.278-.307-4.51-.867c-.486-.22-1.033-.54-1.49-.972"/>
    </svg>
  
  
    <h6  > {% trans "مجموع العموله الكوليه " %} </h6>
    <h6   >
      {% if t  == True %}
      <span class=" gfx"></span>
      {% endif %}
    </h6>
 
</div>
{% endif %}





<div class="table_section">
  <table>
    <thead  class="pymrnt-{{forloop.counter}}" style="background-color: #fff;">
      <tr >
        <!-- <th scope="col">#</th> -->
        <th scope="col">{% trans "اسم المنتج" %}</th>
        <th scope="col" >{% trans "صورت المنتج المطلوبه" %}</th>
        <th scope="col"> {% trans "الكميه" %}</th>
        <th scope="col"> {% trans " الكميه الواصلة" %}</th>

        
        <th scope="col">{% trans "السعر" %}</th>
        <th scope="col">{% trans "الون" %}</th>
        <th scope="col"> {% trans "المقاس" %}</th>

        <th scope="col">{% trans " مجموع الواصل " %}</th>

        <th scope="col">{% trans "المجموع" %}</th>
        {% if t  == True %}
        <th scope="col"> {% trans "العموله" %}</th>
        {% endif %}

        <th scope="col"> {% trans "حزف" %}</th>
      </tr>
    </thead>
    <tbody>
        {% for line in orderdetails %}
  
      <tr class="pymrnt-{{forloop.counter}}">
        <!-- <th scope="row">{{forloop.counter}}</th> -->
        <td>
          {% if line.product.boonimg == True  %}
            <p>{{line.nameimg}}</p>
            {% else %}
              <p>{{line.product.name}}</p>
              {% endif %}
        </td>
        <td>
          <!-- <img src="{{line.product.photo.url}}" alt="" style="width: 80px;height: 80px;"> -->


          {% if line.product.facat == True %}
          {% if line.OrderDetailsimg %}
          <img src="{{line.OrderDetailsimg.url}}" alt="" style="width: 80px;height: 80px;" >
          {% else %}
          <img src="{{line.product.photo.url}}" alt="" style="width: 80px;height: 80px;" >
     
          {% endif %}
          {% elif line.product.boonimg == True %}
          <img src="{{line.OrderDetailsimg.url}}" alt="" style="width: 80px;height: 80px;">

          {% elif line.imgf %}
          <img src="{{line.imgf}}" alt="" style="width: 80px;height: 80px;">
          {% else %}
          
      
          <img src="{{line.product.photo.url}}" alt="" style="width: 80px;height: 80px;">


         {% endif %}
        </td>
        <td>
            <a href="{% url 'sub_qty_detels' id=line.order.id orderdetails_id=line.id  %}"
             class="btn btn-outline-warning btn-sm cmd ">-</a>
            {{line.quantity}}
            <a href="{% url 'add_qty_detels' id=line.order.id orderdetails_id=line.id %}"
             class="btn btn-outline-warning btn-sm cmd">+</a>
        </td>
        <td>{{line.ba}}</td>

       
        <td>{{line.price}}</td>
        <td>
          {% if line.colar %}
          <a   href="{% url 'detils_updect_color' id=line.order.id orderdetails_id=line.id %}">{{line.colar}}</a>
          {% else %}
           <p>  #</p>
          {% endif %}
        </td>
        

        <td>{{line.size}}</td>

        <td style="font-weight: bold; color: red;">{% widthratio line.price 1 line.ba %}ج.م</td>
        <td style="font-weight: bold; color: red;">{% widthratio line.price 1 line.quantity%}ج.م</td>
        {% if t  == True %}
        <td >{{line.product.qus}}</td>
        
        <td class="gfxs" style="display: none;"> {% widthratio line.product.qus 1 line.quantity%}</td>
        {% endif %}
        <td><a href="{%url 'remove_from_card_detels' id=line.order.id orderdetails_id=line.id%}" class="btn btn-outline-danger btn-sm rac">Remove</a></td>
      </tr>
      {% empty  %}
      <h5 class="pymrnt-{{forloop.counter}} alerd alert-warning m-2 p-2" style="text-align: center; color: #fff;">
       فارغ
      </h5>


      {%endfor %}

    </tbody>
  </table>
</div>

<div style="overflow-x: auto ;">


<!--  -->
</div>


<div  style="  padding: 12px;  " class="jst" class="p-2">
  <div class="pymrnt-1" class="p-2" style=" margin-top: 8px; background-color: #fff; border-radius:20px; display: flex ; justify-content: space-between; align-items: center; border-top: 3px solid #fbb230;">
     <h6  style="color: #0298cf; padding: 13px; font-weight: 900 ">{% trans "الاسم" %}</h6>

     <p style="margin: 13px;" ><span class="status"> {{Payment.name}}</span></p>

  </div>
  


  <div class="pymrnt-2" style="background-color: #fff; border-radius:20px; margin-top: 3px; display: flex ; justify-content: space-between; align-items: center;">
      <h6 style="color: #0298cf; padding: 13px; font-weight: 900 " > {% trans "العنوان" %}</h6>
      <p  style="margin: 13px;" class="status">{{Payment.shipment_address}}</p>

   </div>
   
 
   <div  class="pymrnt-3" style="background-color: #fff; border-radius:20px; margin-top: 3px; display: flex ; justify-content: space-between; align-items: center;">
      <h6 style="color: #0298cf; font-weight: 900;padding: 13px;">{% trans "رقم الهاتف " %}</h6>
      <p style="margin: 13px;" > <span class="status" >{{Payment.shipment_phone}}</span> </p>

   </div>
   

   <div class="pymrnt-3" style="background-color: #fff; border-radius:20px; margin-top: 3px;  display: flex ; justify-content: space-between; align-items: center;">
   
    
  
              <h6 style="color: #0298cf; font-weight: 900;padding: 13px;">{% trans "قيمة الشحن " %}</h6>

               <p style="margin: 13px;" > <span class="status" id="mortdffd">{{Payment.na}}</span></p>
  
 </div>
 

 <div class="pymrnt-5" style="background-color: #fff; border-radius:20px; margin-top: 3px;  display: flex ; justify-content: space-between; align-items: center;">
   
    

            <h6 style="color: #0298cf; font-weight: 900;padding: 13px;">{% trans  "المحافظه" %}</h6>

             <p style="margin: 13px;" > <span class="status" >{{Payment.mo}}</span></p>

</div>


<div class="pymrnt-6" style="background-color: #fff; border-radius:20px; margin-top: 3px;  display: flex ; justify-content: space-between; align-items: center;">
   
    

<h6 style="color: #0298cf; padding: 13px; font-weight: 900">{% trans "المركز"  %} </h6>

<p style="margin: 13px;">  <span class="status">{{Payment.mr}}</span></p>

</div>


<a class="pymrnt-7" href="{% url 'updatePayment' Payment.order.pk  Payment.id %}" style="color: #fff; margin-top: 4px;" >
  <div class="btnbtns com" style="text-align: center; background-color: rgb(255, 111, 0); color: #fff; height: 25px;  border-radius: 10px; width: 100%;">
    {% trans "التعديل" %}
  </div>
</a>


</div>
  <div class="ringf">{% trans "انتظار" %}
    <span></span>
  </div>




{% endif %}


<hr>

<hr>



</div>
</div>
<script>
  let save = document.querySelectorAll('.cmd'); 

save.forEach(item=>{

   let fr = item.addEventListener('click',
  
   (eo) => {
   
    // eo.preventDefault(1000)
    item.classList.add('loaderloader')
    eo.disabled = true;
    item.style.background = "red";
    item.style.cursor = 'not-allowed';
  
  }
  );
  

  });


  

</script>

{% endblock %}